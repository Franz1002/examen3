<div class="container" *ngIf="!loading && !error; else loadingOrError">
    <h1 class="title">☄️ NASA - Near Earth Objects</h1>

    <div class="asteroids-grid">
        <div class="asteroid-card" *ngFor="let a of asteroids">
            <h2>{{ a.name }}</h2>

            <p><strong>Magnitud absoluta:</strong> {{ a.absolute_magnitude_h }}</p>
            <p><strong>Diámetro (km):</strong>
                {{ a.estimated_diameter.kilometers.estimated_diameter_min | number:'1.1-2' }} -
                {{ a.estimated_diameter.kilometers.estimated_diameter_max | number:'1.1-2' }}
            </p>
            <p><strong>Peligroso:</strong>
                <span [class.hazard]="a.is_potentially_hazardous_asteroid">
                    {{ a.is_potentially_hazardous_asteroid ? 'Sí ⚠️' : 'No ✅' }}
                </span>
            </p>

            <ng-container *ngIf="getLatestApproach(a) as approach">
                <p><strong>Fecha de acercamiento:</strong> {{ approach.close_approach_date }}</p>
                <p><strong>Velocidad:</strong> {{ approach.relative_velocity.kilometers_per_hour | number:'1.0-0' }}
                    km/h</p>
                <p><strong>Distancia mínima:</strong> {{ approach.miss_distance.kilometers | number:'1.0-0' }} km</p>
            </ng-container>
        </div>
    </div>
</div>

<ng-template #loadingOrError>
    <div class="status">
        <div *ngIf="loading" class="loader"></div>
        <p *ngIf="error">{{ error }}</p>
    </div>
</ng-template>